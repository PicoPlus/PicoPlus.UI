@using Microsoft.AspNetCore.Components
@using Microsoft.AspNetCore.Localization
@inject NavigationManager Nav

<select class="form-select form-select-sm" @onchange="OnChange">
    <option value="fa-IR">?????</option>
    <option value="en-US">English</option>
</select>

@code {
    private async Task OnChange(ChangeEventArgs e)
    {
        var culture = e.Value?.ToString() ?? "fa-IR";
        var uri = $"/set-culture/{culture}?redirectUri={Uri.EscapeDataString(Nav.Uri)}";
        Nav.NavigateTo(uri, forceLoad: true);
        await Task.CompletedTask;
    }
}
